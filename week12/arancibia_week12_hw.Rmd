---
title: "IS 622 Week 12 Homework"
author: "Ben Arancibia"
date: "November 14, 2015"
output: pdf_document
---

__9.4.2__

If we wish to start out, as in Fig. 9.10, with all U and V entries set to the same value, what value minimizes the RMSE for the matrix M of our running example?

![Table](//home/bcarancibia/CUNY_IS_622/week12/910.png)

Above is figure 9.10 but we want to maximize running example matrix M (which has the missing values)

```{r}
M <- matrix(c(5, 2,  4, 4, 3, 3, 1,  2, 4, 1, 2, NA, 3, 1, 4, 2, 5,  4, 3, 5, 4, 4,  5, 4, NA), byrow=TRUE, ncol=5)
```

Look at table to find values for minimizing RMSE.

```{r}
table(M)
```

uij = vij = x

Did calculation on paper because it is easier to write and calculate. See image below.

![Table](//home/bcarancibia/CUNY_IS_622/week12/IMG_0042.png)


__9.4.3__

Starting with the U and V matrices in Fig. 9.16, do the following in order:

![Table](//home/bcarancibia/CUNY_IS_622/week12/916.png)


```{r}
U <- matrix(c(2.6, 1, 1.178, 1, 1, 1, 1, 1, 1, 1), ncol=2)
V <- matrix(c(1.617,1,1,1,1,1,1,1,1,1), ncol=5)

P <- U %*% V
P

#from above
M <- matrix(c(5, 2,  4, 4, 3, 3, 1,  2, 4, 1, 2, NA, 3, 1, 4, 2, 5,  4, 3, 5, 4, 4,  5, 4, NA), byrow=TRUE, ncol=5)


#sqrt((M-P)**2)
```

(a) Reconsider the value of u11. Find its new best value, given the changes that have been made so far.

To find this value you need to calculate the numerator and denominator. This is a five by five matrix so I will calculate numerator by taking the Matrix V multiplied by  (Matrix M - Matrix U * matrix V) for each element of the matrix. For the denominator I will just take Matrix V location. Netflix leaderboard helped with this implementation. 

```{r}
#elements of u

a <- 1
b <- 1

numerator <- sum(sapply(1:5, function(j) { 
  V[b, j] * (M[a, j] - sum(U[a, -c(b)] * V[-c(b), j])) 
  }))

denominator <- sum(sapply(1:5, function(j) { 
  V[b, j]**2; 
  }))

U[a,b] <- numerator / denominator
#updated
U
P <- U %*%V
P
```


(b) Then choose the best value for u52.

update for element in u 5,2
```{r}
#elements of u


a <- 5
b <- 2


numerator <- sum(sapply(1:5, function(j) { 
  V[b, j] * (M[a, j] - sum(U[a, -c(b)] * V[-c(b), j])) 
  }))

denominator <- sum(sapply(1:5, function(j) { 
  V[b, j]**2; 
  }))

U[a,b] <- numerator / denominator
#updated
U

P <- U %*%V
P

```

(c) Then choose the best value for v22.

update for element in u 5,2

```{r}
#elements of v


a <- 2
b <- 2


numerator <- sum(sapply(1:5, function(j) { 
  V[b, j] * (M[a, j] - sum(U[a, -c(b)] * V[-c(b), j])) 
  }))

denominator <- sum(sapply(1:5, function(j) { 
  V[b, j]**2; 
  }))

V[a,b] <- numerator / denominator
#updated
V

P <- U %*%V
P

```

```


